### Local bashrc file containing system-specific settings

## Set up pyenv
export PYENV_ROOT="$HOME/.pyenv"
[[ -d $PYENV_ROOT/bin ]] && export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

## Set up Google Clound SDK
# The next line updates PATH for the Google Cloud SDK.
if [ -f '/opt/google-cloud-sdk/path.bash.inc' ]; then . '/opt/google-cloud-sdk/path.bash.inc'; fi
# The next line enables shell command completion for gcloud.
if [ -f '/opt/google-cloud-sdk/completion.bash.inc' ]; then . '/opt/google-cloud-sdk/completion.bash.inc'; fi


########## Prompt ##########
# References: https://misc.flogisoft.com/bash/tip_colors_and_formatting
#             https://tldp.org/HOWTO/Bash-Prompt-HOWTO/bash-prompt-escape-sequences.html
export GIT_PS1_SHOWDIRTYSTATE=1
RESTORE='\[\e[0m\]'
export PS1="\[\e[00;42;30m\][\w]${RESTORE}\[\e[33m\]\$(__git_ps1 \"[\[\e[03m\]%s\[\e[23m\]]\")${RESTORE} â¨• "

########## Variables ##########
# macOS automatically adds all paths in /etc/paths.d

########## Alias ##########
alias typora="open -a typora"
# alias ssh="source ${HOME}/.scripts/ssh-find-agent.sh && source ${HOME}/.scripts/ssh-agent-setup.sh && ssh"
alias ssh="source ${HOME}/.scripts/ssh-agent-setup.sh && ssh"

########## Miniconda ##########
# Activate environment:   conda activate <env>
# Deactivate environment: conda deactivate
if [ -f "/opt/conda/etc/profile.d/conda.sh" ]; then
    . "/opt/conda/etc/profile.d/conda.sh"
else
    export PATH="/opt/conda/condabin:$PATH"
fi

########## Completion ##########
if type brew &>/dev/null
then
    HOMEBREW_PREFIX="$(brew --prefix)"
    if [[ -r "${HOMEBREW_PREFIX}/etc/profile.d/bash_completion.sh" ]]
    then
        source "${HOMEBREW_PREFIX}/etc/profile.d/bash_completion.sh"
    else
        for COMPLETION in "${HOMEBREW_PREFIX}/etc/bash_completion.d/"*
        do
            [[ -r "${COMPLETION}" ]] && source "${COMPLETION}"
        done
    fi
fi

